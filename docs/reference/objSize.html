<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Recursive object.size — objSize • reproducible</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Recursive object.size — objSize" />
<meta property="og:description" content="This has methods for various types of things that may not correctly report
their object size using object.size.
Also, for lists and environments, it will return the object size separately for each element.
These are estimates only, and could be inaccurate.
Alternative, similar functions include object.size and pryr::object_size.
See Details for the special case of functions and their enclosing environments." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducible</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Cache-using-postgresql.html">Using alternate database backends for Cache</a>
    </li>
    <li>
      <a href="../articles/Intro-to-Cache.html">Introduction to Cache</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/PredictiveEcology/reproducible/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Recursive <code>object.size</code></h1>
    <small class="dont-index">Source: <a href='https://github.com/PredictiveEcology/reproducible/blob/master/R/objectSize.R'><code>R/objectSize.R</code></a></small>
    <div class="hidden name"><code>objSize.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This has methods for various types of things that may not correctly report
their object size using <code>object.size</code>.
Also, for lists and environments, it will return the object size separately for each element.
These are estimates only, and could be inaccurate.
Alternative, similar functions include <code>object.size</code> and <code><a href='https://rdrr.io/pkg/pryr/man/object_size.html'>pryr::object_size</a></code>.
See Details for the special case of functions and their enclosing environments.</p>
    </div>

    <pre class="usage"><span class='fu'>objSize</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>quick</span>, <span class='va'>enclosingEnvs</span>, <span class='va'>.prevEnvirs</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>objSize</span><span class='op'>(</span>
  <span class='va'>x</span>,
  quick <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"reproducible.quick"</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
  enclosingEnvs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  .prevEnvirs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for list</span>
<span class='fu'>objSize</span><span class='op'>(</span>
  <span class='va'>x</span>,
  quick <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"reproducible.quick"</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
  enclosingEnvs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  .prevEnvirs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for environment</span>
<span class='fu'>objSize</span><span class='op'>(</span>
  <span class='va'>x</span>,
  quick <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"reproducible.quick"</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
  enclosingEnvs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  .prevEnvirs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for Path</span>
<span class='fu'>objSize</span><span class='op'>(</span>
  <span class='va'>x</span>,
  quick <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"reproducible.quick"</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
  enclosingEnvs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  .prevEnvirs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for `function`</span>
<span class='fu'>objSize</span><span class='op'>(</span>
  <span class='va'>x</span>,
  quick <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"reproducible.quick"</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
  enclosingEnvs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  .prevEnvirs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>objSizeSession</span><span class='op'>(</span>sumLevel <span class='op'>=</span> <span class='cn'>Inf</span>, enclosingEnvs <span class='op'>=</span> <span class='cn'>TRUE</span>, .prevEnvirs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An object</p></td>
    </tr>
    <tr>
      <th>quick</th>
      <td><p>Logical. Only some methods use this. e.g.,
<code>Path</code> class objects. In which case, <code>file.size</code> will be
used instead of <code>object.size</code>.</p></td>
    </tr>
    <tr>
      <th>enclosingEnvs</th>
      <td><p>Logical indicating whether to include enclosing environments.
Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>.prevEnvirs</th>
      <td><p>For internal account keeping to identify and prevent duplicate counting</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments (currently unused)</p></td>
    </tr>
    <tr>
      <th>sumLevel</th>
      <td><p>Numeric, indicating at which depth in the list of objects should the
object sizes be summed (summarized). Default is <code>Inf</code>, meaning no sums. Currently,
the only option other than Inf is 1: <code>objSizeSession(1)</code>,
which gives the size of each package.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For functions, a user can include the enclosing environment as described
<a href='https://www.r-bloggers.com/2015/03/using-closures-as-objects-in-r/'>https://www.r-bloggers.com/2015/03/using-closures-as-objects-in-r/</a> and
<a href='http://adv-r.had.co.nz/memory.html'>http://adv-r.had.co.nz/memory.html</a>.
It is not entirely clear which estimate is better.
However, if the enclosing environment is the <code>.GlobalEnv</code>, it will
not be included even though <code>enclosingEnvs = TRUE</code>.</p>
<p><code>objSizeSession</code> will give the size of the whole session, including loaded packages.
Because of the difficulties in calculating the object size of <code>base</code>
and <code>methods</code> packages and <code>Autoloads</code>, these are omitted.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>utils</span><span class='op'>)</span>

<span class='va'>foo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/environment.html'>new.env</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>foo</span><span class='op'>$</span><span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>
<span class='va'>foo</span><span class='op'>$</span><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>

<span class='fu'>objSize</span><span class='op'>(</span><span class='va'>foo</span><span class='op'>)</span> <span class='co'># all the elements in the environment</span>
</div><div class='output co'>#&gt; $`foo$b`
#&gt; 96 bytes
#&gt; 
#&gt; $`foo$d`
#&gt; 96 bytes
#&gt; 
#&gt; $foo
#&gt; 56 bytes
#&gt; </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/object.size.html'>object.size</a></span><span class='op'>(</span><span class='va'>foo</span><span class='op'>)</span> <span class='co'># different - only measuring the environment as an object</span>
</div><div class='output co'>#&gt; 56 bytes</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/object.size.html'>object.size</a></span><span class='op'>(</span><span class='va'>prepInputs</span><span class='op'>)</span> <span class='co'># only the function, without its enclosing environment</span>
</div><div class='output co'>#&gt; 491464 bytes</div><div class='input'><span class='fu'>objSize</span><span class='op'>(</span><span class='va'>prepInputs</span><span class='op'>)</span>     <span class='co'># the function, plus its enclosing environment</span>
</div><div class='output co'>#&gt; 491464 bytes</div><div class='input'>
<span class='co'># Size of all packages; includes their imported functions</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>bar</span> <span class='op'>&lt;-</span> <span class='fu'>objSizeSession</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>bar</span>, units <span class='op'>=</span> <span class='st'>"auto"</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>os1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/object.size.html'>object.size</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.environment.html'>as.environment</a></span><span class='op'>(</span><span class='st'>"package:reproducible"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>os2</span> <span class='op'>&lt;-</span> <span class='fu'>objSize</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.environment.html'>as.environment</a></span><span class='op'>(</span><span class='st'>"package:reproducible"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>os1</span><span class='op'>)</span> <span class='co'># very small -- just the environment container</span>
</div><div class='output co'>#&gt; 584 bytes</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>os2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># around 13 MB, with all functions, objects</span>
</div><div class='output co'>#&gt; [1] 468472</div><div class='input'>                 <span class='co'># and imported functions</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


