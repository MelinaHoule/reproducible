<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Determine package dependencies, first looking at local filesystem — pkgDep • reproducible</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Determine package dependencies, first looking at local filesystem — pkgDep" />
<meta property="og:description" content="This is intended to replace package_dependencies or
pkgDep in the miniCRAN package, but with modifications for speed.
It will first check local package directories in libPath, and it if
the function cannot find the packages there, then it will use
package_dependencies.
pkgDep2 is a convenience wrapper of pkgDep that &quot;goes one level in&quot;,
i.e., the first order dependencies, and runs the pkgDep on those.
This is a wrapper around tools::dependsOnPkgs,
but with the added option of sorted, which
will sort them such that the packages at the top will have
the least number of dependencies that are in pkgs.
This is essentially a topological sort, but it is done
heuristically. This can be used to e.g., detach or
unloadNamespace packages in order so that they each
of their dependencies are detached or unloaded first." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducible</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Cache-using-postgresql.html">Using alternate database backends for Cache</a>
    </li>
    <li>
      <a href="../articles/Intro-to-Cache.html">Introduction to Cache</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/PredictiveEcology/reproducible/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Determine package dependencies, first looking at local filesystem</h1>
    <small class="dont-index">Source: <a href='https://github.com/PredictiveEcology/reproducible/blob/master/R/packages.R'><code>R/packages.R</code></a></small>
    <div class="hidden name"><code>pkgDep.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is intended to replace <code><a href='https://rdrr.io/r/tools/package_dependencies.html'>package_dependencies</a></code> or
<code>pkgDep</code> in the <span class="pkg">miniCRAN</span> package, but with modifications for speed.
It will first check local package directories in <code>libPath</code>, and it if
the function cannot find the packages there, then it will use
<code><a href='https://rdrr.io/r/tools/package_dependencies.html'>package_dependencies</a></code>.</p>
<p><code>pkgDep2</code> is a convenience wrapper of <code>pkgDep</code> that "goes one level in",
i.e., the first order dependencies, and runs the <code>pkgDep</code> on those.</p>
<p>This is a wrapper around <code><a href='https://rdrr.io/r/tools/dependsOnPkgs.html'>tools::dependsOnPkgs</a></code>,
but with the added option of <code>sorted</code>, which
will sort them such that the packages at the top will have
the least number of dependencies that are in <code>pkgs</code>.
This is essentially a topological sort, but it is done
heuristically. This can be used to e.g., <code>detach</code> or
<code>unloadNamespace</code> packages in order so that they each
of their dependencies are detached or unloaded first.</p>
    </div>

    <pre class="usage"><span class='fu'>pkgDep</span>(
  <span class='no'>packages</span>,
  <span class='no'>libPath</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>depends</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>imports</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>suggests</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>linkingTo</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>topoSort</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>repos</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"repos"</span>),
  <span class='kw'>refresh</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"reproducible.verbose"</span>)
)

<span class='fu'>pkgDep2</span>(
  <span class='no'>packages</span>,
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>depends</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>imports</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>suggests</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>linkingTo</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>repos</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"repos"</span>),
  <span class='kw'>refresh</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"reproducible.verbose"</span>),
  <span class='kw'>sorted</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='fu'>pkgDepTopoSort</span>(
  <span class='no'>pkgs</span>,
  <span class='no'>deps</span>,
  <span class='kw'>reverse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>topoSort</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>useAllInSearch</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>returnFull</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>packages</th>
      <td><p>a character vector of package names.</p></td>
    </tr>
    <tr>
      <th>libPath</th>
      <td><p>The library path where all packages should be installed, and looked for to load
(i.e., call <code>library</code>)</p></td>
    </tr>
    <tr>
      <th>recursive</th>
      <td><p>Logical. Should dependencies of dependencies be searched, recursively.
NOTE: Dependencies of suggests will not be recursive. Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>depends</th>
      <td><p>Logical. Include packages listed in "Depends". Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>imports</th>
      <td><p>Logical. Include packages listed in "Imports". Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>suggests</th>
      <td><p>Logical. Include packages listed in "Suggests". Default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>linkingTo</th>
      <td><p>Logical. Include packages listed in "LinkingTo". Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>topoSort</th>
      <td><p>Logical. If <code>TRUE</code>, the default, then
the returned list of packages will be in order with the
least number of dependencies listed in <code>pkgs</code> at
the top of the list.</p></td>
    </tr>
    <tr>
      <th>repos</th>
      <td><p>The remote repository (e.g., a CRAN mirror), passed to either
<code>install.packages</code>, <code>install_github</code> or <code>installVersions</code>.</p></td>
    </tr>
    <tr>
      <th>refresh</th>
      <td><p>There is an internal type of caching. If the results are wrong, likely
set <code>refresh = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical indicating if output should monitor the package
    search cycles.</p></td>
    </tr>
    <tr>
      <th>sorted</th>
      <td><p>Logical. If <code>TRUE</code>, the default, the packages will be sorted in
the returned list from most number of dependencies to least.</p></td>
    </tr>
    <tr>
      <th>pkgs</th>
      <td><p>A vector of package names to evaluate their
reverse depends (i.e., the packages that <em>use</em> each
of these packages)</p></td>
    </tr>
    <tr>
      <th>deps</th>
      <td><p>An optional named list of (reverse) dependencies.
If not supplied, then <code><a href='https://rdrr.io/r/tools/dependsOnPkgs.html'>tools::dependsOnPkgs(..., recursive = TRUE)</a></code>
will be used</p></td>
    </tr>
    <tr>
      <th>reverse</th>
      <td><p>logical: if <code>FALSE</code> (default), regular
    dependencies are calculated, otherwise reverse dependencies.</p></td>
    </tr>
    <tr>
      <th>useAllInSearch</th>
      <td><p>Logical. If <code>TRUE</code>, then all non-core
R packages in <code><a href='https://rdrr.io/r/base/search.html'>search()</a></code> will be appended to <code>pkgs</code>
to allow those to also be identified</p></td>
    </tr>
    <tr>
      <th>returnFull</th>
      <td><p>Logical. If <code>TRUE</code>, then the full reverse
dependencies will be returned; if <code>FALSE</code>, the default,
only the reverse dependencies that are found within the <code>pkgs</code>
(and <code><a href='https://rdrr.io/r/base/search.html'>search()</a></code> if <code>useAllInSearch = TRUE</code>) will be returned.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A possibly ordered, named (with packages as names) list where list elements
are either full reverse depends.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>package_dependencies</code> and <code>pkgDep</code> will differ under the following
circumstances:</p><ol>
<li><p>GitHub packages are not detected using <code><a href='https://rdrr.io/r/tools/package_dependencies.html'>tools::package_dependencies</a></code>;</p></li>
<li><p><code><a href='https://rdrr.io/r/tools/package_dependencies.html'>tools::package_dependencies</a></code> does not detect the dependencies of base packages
    among themselves, <em>e.g.</em>, <code>methods</code> depends on <code>stats</code> and <code>graphics</code>.</p></li>
</ol>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>pkgDep</span>(<span class='st'>"crayon"</span>)</div><div class='output co'>#&gt; $crayon
#&gt; [1] "grDevices" "methods"   "utils"     "stats"     "graphics" 
#&gt; </div><div class='input'><span class='fu'>pkgDep2</span>(<span class='st'>"reproducible"</span>)</div><div class='output co'>#&gt; $quickPlot
#&gt;  [1] "ggplot2"      "grid"         "gridBase"     "igraph"       "raster"      
#&gt;  [6] "RColorBrewer" "rgdal"        "rgeos"        "sp"           "gtable"      
#&gt; [11] "isoband"      "MASS"         "mgcv"         "scales"       "testthat"    
#&gt; [16] "evaluate"     "pkgload"      "praise"       "methods"      "stats"       
#&gt; [21] "graphics"     "grDevices"    "utils"        "desc"         "pkgbuild"    
#&gt; [26] "rprojroot"    "rstudioapi"   "assertthat"   "R6"           "crayon"      
#&gt; [31] "tools"        "callr"        "prettyunits"  "processx"     "ps"          
#&gt; [36] "cli"          "withr"        "glue"         "fansi"        "backports"   
#&gt; [41] "rlang"        "digest"       "ellipsis"     "magrittr"     "Rcpp"        
#&gt; [46] "Matrix"       "splines"      "nlme"         "lattice"      "farver"      
#&gt; [51] "labeling"     "munsell"      "viridisLite"  "colorspace"   "lifecycle"   
#&gt; [56] "tibble"       "pillar"       "pkgconfig"    "vctrs"        "utf8"        
#&gt; [61] "data.table"   "fpCompare"   
#&gt; 
#&gt; $usethis
#&gt;  [1] "clipr"      "gh"         "git2r"      "rematch2"   "whisker"   
#&gt;  [6] "yaml"       "utils"      "ini"        "cli"        "jsonlite"  
#&gt; [11] "httr"       "assertthat" "tools"      "crayon"     "glue"      
#&gt; [16] "methods"    "fansi"      "grDevices"  "stats"      "graphics"  
#&gt; [21] "mime"       "openssl"    "R6"         "askpass"    "sys"       
#&gt; [26] "curl"       "tibble"     "ellipsis"   "lifecycle"  "pillar"    
#&gt; [31] "pkgconfig"  "vctrs"      "rlang"      "utf8"       "digest"    
#&gt; [36] "magrittr"   "desc"       "fs"         "purrr"      "rprojroot" 
#&gt; [41] "rstudioapi" "withr"      "backports" 
#&gt; 
#&gt; $googledrive
#&gt;  [1] "curl"       "gargle"     "httr"       "jsonlite"   "magrittr"  
#&gt;  [6] "purrr"      "rlang"      "tibble"     "uuid"       "fs"        
#&gt; [11] "withr"      "methods"    "stats"      "graphics"   "grDevices" 
#&gt; [16] "utils"      "glue"       "mime"       "openssl"    "R6"        
#&gt; [21] "tools"      "askpass"    "sys"        "cli"        "ellipsis"  
#&gt; [26] "fansi"      "lifecycle"  "pillar"     "pkgconfig"  "vctrs"     
#&gt; [31] "assertthat" "crayon"     "utf8"       "digest"    
#&gt; 
#&gt; $testthat
#&gt;  [1] "evaluate"    "pkgload"     "praise"      "methods"     "stats"      
#&gt;  [6] "graphics"    "grDevices"   "utils"       "desc"        "pkgbuild"   
#&gt; [11] "rprojroot"   "rstudioapi"  "assertthat"  "R6"          "crayon"     
#&gt; [16] "tools"       "callr"       "prettyunits" "processx"    "ps"         
#&gt; [21] "cli"         "withr"       "glue"        "fansi"       "backports"  
#&gt; [26] "rlang"       "digest"      "ellipsis"    "magrittr"   
#&gt; 
#&gt; $RSQLite
#&gt;  [1] "bit64"     "blob"      "BH"        "plogr"     "bit"       "utils"    
#&gt;  [7] "methods"   "stats"     "graphics"  "grDevices" "rlang"     "vctrs"    
#&gt; [13] "ellipsis"  "digest"    "glue"      "DBI"       "memoise"   "pkgconfig"
#&gt; [19] "Rcpp"     
#&gt; 
#&gt; $sf
#&gt;  [1] "classInt"   "units"      "e1071"      "class"      "KernSmooth"
#&gt;  [6] "graphics"   "grDevices"  "stats"      "methods"    "utils"     
#&gt; [11] "MASS"       "Rcpp"       "DBI"        "grid"       "magrittr"  
#&gt; [16] "tools"     
#&gt; 
#&gt; $httr
#&gt; [1] "mime"     "openssl"  "R6"       "tools"    "askpass"  "sys"      "curl"    
#&gt; [8] "jsonlite"
#&gt; 
#&gt; $R.utils
#&gt; [1] "R.methodsS3" "R.oo"        "utils"       "methods"     "stats"      
#&gt; [6] "graphics"    "grDevices"   "tools"      
#&gt; 
#&gt; $lifecycle
#&gt; [1] "glue"      "rlang"     "methods"   "stats"     "graphics"  "grDevices"
#&gt; [7] "utils"    
#&gt; 
#&gt; $qs
#&gt; [1] "Rcpp"          "RApiSerialize" "methods"       "utils"        
#&gt; [5] "stats"         "graphics"      "grDevices"    
#&gt; 
#&gt; $raster
#&gt; [1] "Rcpp"      "methods"   "sp"        "utils"     "stats"     "graphics" 
#&gt; [7] "grDevices"
#&gt; 
#&gt; $sp
#&gt; [1] "utils"     "stats"     "graphics"  "grDevices" "lattice"   "grid"     
#&gt; [7] "methods"  
#&gt; 
#&gt; $remotes
#&gt; [1] "methods"   "stats"     "tools"     "utils"     "graphics"  "grDevices"
#&gt; 
#&gt; $crayon
#&gt; [1] "grDevices" "methods"   "utils"     "stats"     "graphics" 
#&gt; 
#&gt; $data.table
#&gt; [1] "methods"   "stats"     "graphics"  "grDevices" "utils"    
#&gt; 
#&gt; $DBI
#&gt; [1] "methods"   "stats"     "graphics"  "grDevices" "utils"    
#&gt; 
#&gt; $glue
#&gt; [1] "methods"   "stats"     "graphics"  "grDevices" "utils"    
#&gt; 
#&gt; $methods
#&gt; [1] "stats"     "graphics"  "grDevices" "utils"    
#&gt; 
#&gt; $memoise
#&gt; [1] "digest" "utils" 
#&gt; 
#&gt; $backports
#&gt; [1] "utils"
#&gt; 
#&gt; $digest
#&gt; [1] "utils"
#&gt; 
#&gt; $fastdigest
#&gt; character(0)
#&gt; 
#&gt; $fpCompare
#&gt; character(0)
#&gt; 
#&gt; $magrittr
#&gt; character(0)
#&gt; 
#&gt; $rlang
#&gt; character(0)
#&gt; 
#&gt; $tools
#&gt; character(0)
#&gt; 
#&gt; $utils
#&gt; character(0)
#&gt; 
#&gt; $versions
#&gt; character(0)
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


